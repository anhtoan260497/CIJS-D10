{"ast":null,"code":"import _toConsumableArray from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/anhtoan/Desktop/CIJS-D10/movieapp/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./MovieRender.scss\";import MovieTag from\"./MovieTag\";import Data from\"../../../Data/Data\";import TrailerHover from\"./MovieTag/TrailerHover\";import{Fragment}from\"react/cjs/react.production.min\";import SearchBar from\"../SearchBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieRender=/*#__PURE__*/function(_Component){_inherits(MovieRender,_Component);var _super=_createSuper(MovieRender);function MovieRender(props){var _this;_classCallCheck(this,MovieRender);_this=_super.call(this,props);_this.onClickButton=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var dataPopular,resPopular,i,dataTopRated,resTopRated,_i,dataUpComing,resUpComing,_i2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(e.target.name===\"isPopularMovies\")){_context.next=9;break;}dataPopular=[];_context.next=4;return Data.getPopularMovies(1);case 4:resPopular=_context.sent;for(i=0;i<20;i++){dataPopular.push(resPopular.data.results[i]);}// Lấy 20 phim\n_this.setState({isPopularMovies:true,isTopRatedMovies:false,isUpComingMovies:false,onTrailer:false,data:dataPopular,page:1,search:\"\",isSearch:false});_context.next=24;break;case 9:if(!(e.target.name===\"isTopRatedMovies\")){_context.next=18;break;}dataTopRated=[];_context.next=13;return Data.getTopRatedMovies(1);case 13:resTopRated=_context.sent;for(_i=0;_i<20;_i++){dataTopRated.push(resTopRated.data.results[_i]);}_this.setState({isPopularMovies:false,isTopRatedMovies:true,isUpComingMovies:false,onTrailer:false,data:dataTopRated,page:1,search:\"\",isSearch:false});_context.next=24;break;case 18:dataUpComing=[];_context.next=21;return Data.getUpComingMovies(1);case 21:resUpComing=_context.sent;for(_i2=0;_i2<20;_i2++){dataUpComing.push(resUpComing.data.results[_i2]);}_this.setState({isPopularMovies:false,isTopRatedMovies:false,isUpComingMovies:true,data:dataUpComing,onTrailer:false,page:1,search:\"\",isSearch:false});case 24:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onGetId=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var key,resVideo;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:key=\"\";_context2.next=3;return Data.getVideos(id);case 3:resVideo=_context2.sent;_this.setState({trailer:resVideo.data.results},function(){var arr=_this.state.trailer.filter(function(el){return el.name.includes(\"Official\")||el.name.includes(\"Trailer\");});if(arr.length!==0){key=arr[0].key;_this.setState({key:key,onTrailer:true});}});// Lấy key của video\ncase 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.renderMovieTag=function(){return _this.state.data.map(function(el){return/*#__PURE__*/_jsx(MovieTag,{getId:_this.props.getId,history:_this.props.history,movies:el,onGetId:_this.onGetId},el.id);});};_this.turnOffTrailer=function(){_this.setState({onTrailer:false});};_this.onSearch=function(e){_this.setState({search:e.target.value,isPopularMovies:false,isTopRatedMovies:false,isUpComingMovies:false,isSearch:true},/*#__PURE__*/ // Nhập ký tự vào thì cho isSearch bằng True\n_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var dataPopular,resPopular,i,resSearch;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(_this.state.search.length===0)){_context3.next=9;break;}//Nếu không có gì trong thanh search thì render lại phần Popular\ndataPopular=[];_context3.next=4;return Data.getPopularMovies(_this.state.page);case 4:resPopular=_context3.sent;for(i=0;i<20;i++){dataPopular.push(resPopular.data.results[i]);}_this.setState({data:dataPopular,isSearch:false});_context3.next=13;break;case 9:_context3.next=11;return Data.getSearch(_this.state.search);case 11:resSearch=_context3.sent;_this.setState({data:resSearch.data.results});case 13:case\"end\":return _context3.stop();}}},_callee3);})));};_this.loadMore=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var newMovies,resPopular,i,_newMovies,resTopRated,_i3,_newMovies2,resUpComing,_i4;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!_this.state.isPopularMovies){_context4.next=10;break;}//Trường hợp lấy Popular Movie\nnewMovies=_toConsumableArray(_this.state.data);//Clone lại data bên trên\n_this.setState({isLoading:true});// Cho gif loading\n_context4.next=5;return Data.getPopularMovies(_this.state.page+1);case 5:resPopular=_context4.sent;// Lấy Data Page 2\nfor(i=0;i<20;i++){newMovies.push(resPopular.data.results[i]);// tạo lại mảng data mới\n}_this.setState({isLoading:false,data:newMovies,page:_this.state.page+1});// tắt loading, set lại data để render và chỉnh số page đang lấy +1\n_context4.next=28;break;case 10:if(!_this.state.isTopRatedMovies){_context4.next=20;break;}//Trường hợp Top Rated\n//Trường hợp lấy Popular Movie\n_newMovies=_toConsumableArray(_this.state.data);_this.setState({isLoading:true});_context4.next=15;return Data.getTopRatedMovies(_this.state.page+1);case 15:resTopRated=_context4.sent;//\nfor(_i3=0;_i3<20;_i3++){_newMovies.push(resTopRated.data.results[_i3]);}_this.setState({isLoading:false,data:_newMovies,page:_this.state.page+1});_context4.next=28;break;case 20:if(!_this.state.isUpComingMovies){_context4.next=28;break;}//Trường hợp lấy Upcoming Movie\n_newMovies2=_toConsumableArray(_this.state.data);_this.setState({isLoading:true});_context4.next=25;return Data.getUpComingMovies(_this.state.page+1);case 25:resUpComing=_context4.sent;for(_i4=0;_i4<20;_i4++){_newMovies2.push(resUpComing.data.results[_i4]);}_this.setState({isLoading:false,data:_newMovies2,page:_this.state.page+1});case 28:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={page:1,data:[],isPopularMovies:true,isTopRatedMovies:false,isUpComingMovies:false,isSearch:false,// lấy giá trị từ components Container - Home\ntrailer:[],key:\"\",onTrailer:false,search:\"\",isLoading:false};return _this;}// Mặc định lúc Mount đầu tiên sẽ luôn là Popular\n_createClass(MovieRender,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var dataPopular,resPopular,i;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dataPopular=[];_context5.next=3;return Data.getPopularMovies(this.state.page);case 3:resPopular=_context5.sent;for(i=0;i<20;i++){dataPopular.push(resPopular.data.results[i]);}this.setState({data:dataPopular});case 6:case\"end\":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// Tạo nút Popular, Upcoming và Top Rated, ấn vào cái nào, lấy Data cái đó set lại state\n},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:this.onSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"popular button\",onClick:function onClick(e){return _this2.onClickButton(e);},name:\"isPopularMovies\",children:\"Popular\"}),/*#__PURE__*/_jsx(\"button\",{className:\"top-rated button\",onClick:function onClick(e){return _this2.onClickButton(e);},name:\"isTopRatedMovies\",children:\"Top Rated\"}),/*#__PURE__*/_jsx(\"button\",{className:\"up-coming button\",onClick:function onClick(e){return _this2.onClickButton(e);},name:\"isUpComingMovies\",children:\"Up Coming\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-render-container\",onClick:this.turnOffTrailer,children:[this.state.onTrailer?/*#__PURE__*/_jsx(TrailerHover,{id:this.state.key}):null,this.renderMovieTag()]}),this.state.isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/Images/loading.gif\",alt:\"non\"}),\" \"]}):/*#__PURE__*/_jsx(\"div\",{className:\"load-more-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"load-more\",onClick:this.loadMore,children:\"Load More\"})})]});}}]);return MovieRender;}(Component);export default MovieRender;","map":{"version":3,"sources":["/Users/anhtoan/Desktop/CIJS-D10/movieapp/src/Components/Homepage/MovieRender/index.jsx"],"names":["React","Component","MovieTag","Data","TrailerHover","Fragment","SearchBar","MovieRender","props","onClickButton","e","target","name","dataPopular","getPopularMovies","resPopular","i","push","data","results","setState","isPopularMovies","isTopRatedMovies","isUpComingMovies","onTrailer","page","search","isSearch","dataTopRated","getTopRatedMovies","resTopRated","dataUpComing","getUpComingMovies","resUpComing","onGetId","id","key","getVideos","resVideo","trailer","arr","state","filter","el","includes","length","renderMovieTag","map","getId","history","turnOffTrailer","onSearch","value","getSearch","resSearch","loadMore","newMovies","isLoading","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./MovieRender.scss\";\nimport MovieTag from \"./MovieTag\";\nimport Data from \"../../../Data/Data\";\nimport TrailerHover from \"./MovieTag/TrailerHover\";\nimport { Fragment } from \"react/cjs/react.production.min\";\nimport SearchBar from \"../SearchBar\";\n\nclass MovieRender extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      data: [],\n\n      isPopularMovies: true,\n      isTopRatedMovies: false,\n      isUpComingMovies: false,\n      isSearch: false, // lấy giá trị từ components Container - Home\n\n      trailer: [],\n      key: \"\",\n      onTrailer: false,\n      search: \"\",\n      isLoading: false,\n    };\n  }\n\n  // Mặc định lúc Mount đầu tiên sẽ luôn là Popular\n  async componentDidMount() {\n    let dataPopular = [];\n    let resPopular = await Data.getPopularMovies(this.state.page);\n    for (let i = 0; i <20; i++) {\n      dataPopular.push(resPopular.data.results[i]);\n    }\n    this.setState({ data: dataPopular });\n  }\n\n  // Tạo nút Popular, Upcoming và Top Rated, ấn vào cái nào, lấy Data cái đó set lại state\n  onClickButton = async (e) => {\n    if (e.target.name === \"isPopularMovies\") {\n      let dataPopular = [];\n      let resPopular = await Data.getPopularMovies(1);\n      for (let i = 0; i < 20; i++) {\n        dataPopular.push(resPopular.data.results[i]);\n      } // Lấy 20 phim\n      this.setState({\n        isPopularMovies: true,\n        isTopRatedMovies: false,\n        isUpComingMovies: false,\n        onTrailer: false,\n        data: dataPopular,\n        page:1,\n        search:\"\",\n        isSearch:false\n      });\n    } else if (e.target.name === \"isTopRatedMovies\") {\n      let dataTopRated = [];\n      let resTopRated = await Data.getTopRatedMovies(1);\n      for (let i = 0; i < 20; i++) {\n        dataTopRated.push(resTopRated.data.results[i]);\n      }\n      this.setState({\n        isPopularMovies: false,\n        isTopRatedMovies: true,\n        isUpComingMovies: false,\n        onTrailer: false,\n        data: dataTopRated,\n        page:1,\n        search:\"\",\n        isSearch:false\n      });\n    } else {\n      let dataUpComing = [];\n      let resUpComing = await Data.getUpComingMovies(1);\n      for (let i = 0; i < 20; i++) {\n        dataUpComing.push(resUpComing.data.results[i]);\n      }\n      this.setState({\n        isPopularMovies: false,\n        isTopRatedMovies: false,\n        isUpComingMovies: true,\n        data: dataUpComing,\n        onTrailer: false,\n        page:1,\n        search:\"\",\n        isSearch:false\n      });\n    }\n  };\n\n  //Lấy ID để lấy trailer\n  onGetId = async (id) => {\n    let key = \"\";\n    let resVideo = await Data.getVideos(id);\n    this.setState({ trailer: resVideo.data.results }, () => {\n      let arr = this.state.trailer.filter((el) => {\n        return el.name.includes(\"Official\") || el.name.includes(\"Trailer\");\n      });\n      if (arr.length !== 0) {\n        key = arr[0].key;\n        this.setState({ key: key, onTrailer: true });\n      }\n    }); // Lấy key của video\n  };\n\n  //Render Movies\n  renderMovieTag = () => {\n    return this.state.data.map((el) => {\n      return (\n        <MovieTag\n          getId = {this.props.getId}\n          history={this.props.history}\n          movies={el}\n          key={el.id}\n          onGetId={this.onGetId}\n        />\n      );\n    });\n  };\n\n  //Tắt trailer\n  turnOffTrailer = () => {\n    this.setState({ onTrailer: false });\n  };\n\n  onSearch = (e) => {\n    this.setState(\n      {\n        search: e.target.value,\n        isPopularMovies: false,\n        isTopRatedMovies: false,\n        isUpComingMovies: false,\n        isSearch: true,\n      }, // Nhập ký tự vào thì cho isSearch bằng True\n      async () => {\n        // Lấy Data\n        if (this.state.search.length === 0) {\n          //Nếu không có gì trong thanh search thì render lại phần Popular\n          let dataPopular = [];\n          let resPopular = await Data.getPopularMovies(this.state.page);\n          for (let i = 0; i <20; i++) {\n            dataPopular.push(resPopular.data.results[i]);\n          }\n          this.setState({ data: dataPopular, isSearch: false });\n        } else {\n          // Nếu có thì Render phần Search\n          let resSearch = await Data.getSearch(this.state.search);\n          this.setState({ data: resSearch.data.results });\n        }\n      }\n    );\n  };\n\n  loadMore = async () => {\n    if (this.state.isPopularMovies) {\n      //Trường hợp lấy Popular Movie\n      let newMovies = [...this.state.data]; //Clone lại data bên trên\n      this.setState({ isLoading: true }); // Cho gif loading\n      let resPopular = await Data.getPopularMovies(this.state.page + 1); // Lấy Data Page 2\n      for (let i = 0; i < 20; i++) {\n        newMovies.push(resPopular.data.results[i]); // tạo lại mảng data mới\n      }\n      this.setState({\n        isLoading: false,\n        data: newMovies,\n        page: this.state.page + 1,\n      }); // tắt loading, set lại data để render và chỉnh số page đang lấy +1\n    } else if (this.state.isTopRatedMovies) {\n      //Trường hợp Top Rated\n      //Trường hợp lấy Popular Movie\n      let newMovies = [...this.state.data];\n      this.setState({ isLoading: true });\n      let resTopRated = await Data.getTopRatedMovies(this.state.page + 1); //\n      for (let i = 0; i < 20; i++) {\n        newMovies.push(resTopRated.data.results[i]);\n      }\n      this.setState({\n        isLoading: false,\n        data: newMovies,\n        page: this.state.page + 1,\n      });\n    } else if (this.state.isUpComingMovies) {\n      //Trường hợp lấy Upcoming Movie\n      let newMovies = [...this.state.data];\n      this.setState({ isLoading: true });\n      let resUpComing = await Data.getUpComingMovies(this.state.page + 1);\n      for (let i = 0; i < 20; i++) {\n        newMovies.push(resUpComing.data.results[i]);\n      }\n      this.setState({\n        isLoading: false,\n        data: newMovies,\n        page: this.state.page + 1,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <SearchBar onSearch={this.onSearch} />\n        <div className=\"buttons\">\n          <button\n            className=\"popular button\"\n            onClick={(e) => this.onClickButton(e)}\n            name=\"isPopularMovies\"\n          >\n            Popular\n          </button>\n          <button\n            className=\"top-rated button\"\n            onClick={(e) => this.onClickButton(e)}\n            name=\"isTopRatedMovies\"\n          >\n            Top Rated\n          </button>\n          <button\n            className=\"up-coming button\"\n            onClick={(e) => this.onClickButton(e)}\n            name=\"isUpComingMovies\"\n          >\n            Up Coming\n          </button>\n        </div>\n        <div className=\"movie-render-container\" onClick={this.turnOffTrailer}>\n          {this.state.onTrailer ? <TrailerHover id={this.state.key} /> : null}\n          {this.renderMovieTag()}\n        </div>\n        {this.state.isLoading ? (\n          <div className=\"loading\">\n            <img\n              src={process.env.PUBLIC_URL + \"/Images/loading.gif\"}\n              alt=\"non\"\n            />{\" \"}\n          </div>\n        ) : (\n          <div className=\"load-more-container\">\n            <button className=\"load-more\" onClick={this.loadMore}>\n              Load More\n            </button>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default MovieRender;\n"]},"metadata":{},"sourceType":"module"}